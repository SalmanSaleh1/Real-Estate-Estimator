{% extends "base.html" %}

{% block title %}Real Estate Estimator{% endblock %}

{% block head %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/estimator.css') }}">
{% endblock %}

{% block body %}
  <div class="estimator-wrapper">
    <div class="estimator-container">
      <!-- Title of the estimator tool -->
      <h1 class="estimator-title">Real Estate Estimator Tool</h1>

      <!-- Form for inputting property details -->
      <form action="/estimate" method="POST" class="estimator-form">
        <!-- Container for two columns of form inputs -->
        <div class="form-row">
          <div class="form-column">
            <div class="form-group">
              <label for="total_area">Area (m²):</label>
              <input type="number" name="total_area" id="total_area" placeholder="Enter area" class="form-control" required>
            </div>
          </div>

          <div class="form-column">
            <div class="form-group">
              <label for="city">City:</label>
              <select name="city" id="city" class="form-control" required>
                <option value="">Select a city</option>
                <option value="Al-Rass">Al-Rass</option>
                <option value="Unaizah">Unaizah</option>
                <option value="Buraidah">Buraidah</option>
                <option value="Riyadh">Riyadh</option>
                <option value="Jeddah">Jeddah</option>
                <option value="Dammam">Dammam</option>
                <option value="Mecca">Mecca</option>
                <option value="Medina">Medina</option>
                <option value="Khobar">Khobar</option>
                <option value="Taif">Taif</option>
                <option value="Abha">Abha</option>
                <option value="Tabuk">Tabuk</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Second row for District and Mukatat fields -->
        <div class="form-row">
          <div class="form-column">
            <div class="form-group">
              <label for="district">District:</label>
              <select name="district" id="district" class="form-control" required>
                <option value="">Select a district</option>
              </select>
            </div>
          </div>

          <div class="form-column">
            <div class="form-group">
              <label for="mukatat">Mukatat:</label>
              <input type="text" name="mukatat" id="mukatat" placeholder="Enter Mukatat" class="form-control" required>
            </div>
          </div>
        </div>

        <!-- Third row for Property Classification and Property Type fields -->
        <div class="form-row">
          <div class="form-column">
            <div class="form-group">
              <label for="property_classification">Property Classification:</label>
              <select name="property_classification" id="property_classification" class="form-control" required>
                <option value="">Select a Classification</option>
                <option value="سكني">سكني</option>
                <option value="تجاري">تجاري</option>
                <option value="زراعي">زراعي</option>
                <option value="صناعي">صناعي</option>
              </select>
            </div>
          </div>

          <div class="form-column">
            <div class="form-group">
              <label for="property_type">Property Type:</label>
              <select name="property_type" id="property_type" class="form-control" required>
                <option value="">Select a Type</option>
                <option value="أرض">أرض</option>
                <option value="أرض زراعية">أرض زراعية</option>
                <option value="شقة">شقة</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Submit button -->
        <button type="submit" class="btn btn-primary">Calculate Estimated Value</button>
      </form>

      <!-- Disclaimer -->
      <p class="disclaimer">This estimate is only a prediction and should not be considered the final price. Please consult with a professional for an accurate property valuation.</p>

      <!-- Placeholder for the result -->
      <div id="result" class="result-box"></div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const citySelect = document.getElementById('city');
      const districtSelect = document.getElementById('district');
      const resultBox = document.getElementById('result');

      const districts = {
        'Al-Rass': ['Al-Qadsia', 'Al-Shuhada', 'Al-Rawda', 'Al-Houta'],
        'Unaizah': ['Al-Rawabi', 'Al-Safa', 'Al-Rayyan', 'Al-Rawda'],
        'Buraidah': ['Al-Nakheel', 'Al-Qadsia', 'Al-Nahda', 'Al-Rayan'],
        'Riyadh': ['Olaya', 'Al-Malaz', 'Al-Naseem', 'Al-Rawda'],
        'Jeddah': ['Al-Hamra', 'Al-Safa', 'Al-Rehab', 'Al-Baghdadiyah'],
        'Dammam': ['Al-Faisaliyah', 'Al-Mazrouiah', 'Al-Jubail', 'Al-Rakah'],
        'Mecca': ['Al-Aziziyah', 'Al-Hijra', 'Al-Zaher', 'Al-Maabdah'],
        'Medina': ['Al-Manakhah', 'Al-Hijaziyah', 'Al-Awali', 'Al-Safiyah'],
        'Khobar': ['Al-Aqrabiyah', 'Al-Rakah', 'Al-Thuqbah', 'Al-Rakah'],
        'Taif': ['Al-Hawiya', 'Al-Shifa', 'Al-Qaim', 'Al-Sail'],
        'Abha': ['Al-Masarah', 'Al-Nuzhah', 'Al-Faisaliyah', 'Al-Rawabi'],
        'Tabuk': ['Al-Amir Fahd', 'Al-Morooj', 'Al-Rawdha', 'Al-Abrar']
      };

      citySelect.addEventListener('change', function () {
        const selectedCity = citySelect.value;
        districtSelect.innerHTML = '<option value="">Select a district</option>';

        if (districts[selectedCity]) {
          districts[selectedCity].forEach(function (district) {
            const option = document.createElement('option');
            option.value = district;
            option.textContent = district;
            districtSelect.appendChild(option);
          });
        }
      });

      document.querySelector('.estimator-form').addEventListener('submit', function (event) {
        event.preventDefault();
        resultBox.style.display = 'block'; // Display the result box
        resultBox.innerHTML = '<h2>Estimated Property Value: 130,680 SAR</h2>';
      });
    });
  </script>
{% endblock %}
